<style id="antiClickjack">
body {
	display: none !important;
}
</style>
<script type="text/javascript">
	if (self === top) {
		var antiClickjack = document.getElementById("antiClickjack");
		antiClickjack.parentNode.removeChild(antiClickjack);
	} else {
		top.location = self.location;
	}
</script>
<ng-include src="'views/dateTemplate.html'"></ng-include>
<ng-include src="'views/vaccinePickerTemplate.html'"></ng-include>
<ng-include src="'views/edit/editTestPlan.html'"></ng-include>
<ng-include src="'views/edit/editTestPlanData.html'"></ng-include>
<ng-include src="'views/edit/editEvent.html'"></ng-include>
<ng-include src="'views/edit/editForecast.html'"></ng-include>
<ng-include src="'views/edit/editPatient.html'"></ng-include>
<ng-include src="'views/edit/editGroup.html'"></ng-include>
<div class="row" ng-show="!selectedTestPlan1">
	<div class="col-md-12">
		<p>No Test Case Selected.</p>
	</div>
</div>
<div ng-show="selectedTP" class="fill">
	<div class="row">
		<div ng-show="!hideLoe" class="col-md-4">
			<div class="panel panel-primary" ng-style="!tpview ? { 'margin-bottom' : '40px' } : {}">
				<div class="panel-heading col-md-12"  layout="row" layout-align="start center" style="background-color: #293856;">
					<div flex="15" style="padding: 0;">
						<button class="btn btn-xs" ng-style="!tpview ? { 'background-color' : '#44bf6b' } : {}" ng-click="tpview = !tpview" style="margin: 0; margin-right: 10px;">
							<md-tooltip md-direction="top">{{ tpview ? 'Hide' : 'Show'}}</md-tooltip>
							<i ng-show="!tpview" class="fa fa-eye" aria-hidden="true" style="font-size : 1.8em; color: #2d5634;"></i>
							<i ng-show="tpview" class="fa fa-eye-slash" aria-hidden="true" style="font-size : 1.8em; color: rgb(203, 167, 167);"></i>
						</button>
					</div>
					<div flex="10" ng-show="workSpaceChanges() || hasIncomplete" layout="row">
						<div ng-show="workSpaceChanges()" layout="row">
							<i class="fa fa-refresh unsaved" aria-hidden="true"></i>
							<md-tooltip md-direction="top">One or more test cases have unsaved changes</md-tooltip>
						</div>
						<div style="margin-left : 5px;" ng-show="hasIncomplete" layout="row">
							<i class="fa fa-exclamation" aria-hidden="true" style="margin-right: 5px; color: red;"></i>
							<md-tooltip md-direction="top">One or more test cases are incomplete</md-tooltip>
						</div>
					</div>
					<div flex="{{workSpaceChanges() || hasIncomplete ? 60 : 70 }}" style="text-align: center;">
						<strong> Test Browser </strong>
					</div>
					<div flex="15" layout="row" layout-align="end" style="padding: 0;">
						<button class="btn btn-xs" ng-class="{ 'btn-info' : filterView, 'btn-primary' : !filterView }" ng-click="filterView = !filterView" style="margin: 0; margin-right: 10px;">
							<span ng-style="filterActive(tcFilter) ? { 'background-color' : '#47ef47' } : { 'background-color' : '#ff4040' } " style="padding: 0 !important; margin-right: 5px; font-size: 10px;" class="badge">&nbsp;</span>
							<i class="fa fa-filter" aria-hidden="true" style="font-size : 1.8em;"></i>
							<md-tooltip md-direction="top">Filter</md-tooltip>
						</button>
					</div>
				</div>
				<div layout="column" style="width : 100%; background-color : rgb(241,241,241); border: 1px solid #dddddd; padding: 10px;" ng-show="filterView" ng-model-options="{updateOn : 'change blur'}">
					<div layout="row" layout-align="center center">
						<md-input-container style="width: 100%;">
							<label>Name</label>
							<input ng-model="tcFilter.example.name" type="text"/>
						</md-input-container>
					</div>
					<div layout="row" layout-align="center center">
						<md-input-container style="width: 100%;">
							<label>ID</label>
							<input ng-model="tcFilter.example.uid" type="text"/>
						</md-input-container>
						<md-input-container style="width: 100%;">
							<label>Last Changed Version</label>
							<input ng-model="tcFilter.example.metaData.version" type="text"/>
						</md-input-container>
					</div>
					<div layout="row" layout-align="center center">
						<md-input-container style="width: 100%;">
							<label>Created</label>
							<md-select ng-model="tcFilter.dates.created.position">
								<md-option value="B">BEFORE</md-option>
								<md-option value="A">AFTER</md-option>
								<md-option value="O">ON</md-option>
							</md-select>
						</md-input-container>
						<md-input-container style="width: 100%;">
							<label>Date</label>
							<md-datepicker
									flex="50"
									ng-model="tcFilter.dates.created.date"
									md-placeholder="Creation Date">
							</md-datepicker>
						</md-input-container>
					</div>
					<div layout="row" layout-align="center center">
						<md-input-container style="width: 100%;">
							<label>Last Updated</label>
							<md-select ng-model="tcFilter.dates.updated.position">
								<md-option value="B">BEFORE</md-option>
								<md-option value="A">AFTER</md-option>
								<md-option value="O">ON</md-option>
							</md-select>
						</md-input-container>
						<md-input-container style="width: 100%;">
							<label>Date</label>
							<md-datepicker
									flex="50"
									ng-model="tcFilter.dates.updated.date"
									md-placeholder="Update Date">
							</md-datepicker>
						</md-input-container>
					</div>
					<div layout="row" layout-align="center center">
						<md-checkbox ng-model="tcFilter.changed">
							Unsaved Changes
						</md-checkbox>
						<md-checkbox ng-model="tcFilter.incomplete">
							Incomplete
						</md-checkbox>
					</div>
					<button class="btn btn-danger" style="width : 100%;" ng-click="resetTcFilter(tcFilter)">
						Reset Filter
					</button>
				</div>
				<div class="panel-body panel-resizable" style="{{aTCisSelected() ? 'height: 260px;' : 'height: 580px;'}}" ng-show="tpview">
					<div style="white-space:nowrap;" layout="column">
						<div>
							<ng-include src="'views/testplanTree.html'" />
						</div>
						<div ></div>
					</div>
				</div>
			</div>
			<br />
			<div class="panel panel-primary" ng-show="aTCisSelected()" style="margin-top: 10px;" ng-init="ptview = true;">
				<div class="panel-heading panel-heading-collapsable" style="background-color: #293856" layout="row" layout-align="start center">
					<button flex="15" class="btn btn-xs" ng-style="!ptview ? { 'background-color' : '#44bf6b' } : {}" ng-click="ptview = !ptview" style="margin: 0; margin-right: 10px;">
						<md-tooltip md-direction="top">{{ ptview ? 'Hide' : 'Show'}}</md-tooltip>
						<i ng-show="!ptview" class="fa fa-eye" aria-hidden="true" style="font-size : 1.8em; color: #2d5634;"></i>
						<i ng-show="ptview" class="fa fa-eye-slash" aria-hidden="true" style="font-size : 1.8em; color: rgb(203, 167, 167);"></i>
					</button>
					<div flex="85" style="text-align: center">
						<strong>Assessment Date and Patient Information</strong>
					</div>
				</div>
				<div class="panel-body" ng-show="ptview">
					<div class="toc-container">
						<table class="table table-condensed table-bordered table-hover">
							<tbody>
								<tr ng-click="selectPatient()" style="cursor: pointer;" ng-class="{'sinfo' : patientSelected}">
									<td>
										<table style="width : 100%;">
											<tr style="text-align: center;">
												<td>
													<strong>Assessment Date</strong>
												</td>
												<td style="text-align: center;">
													<div layout="row" layout-align="center center">
														<span ng-if="selectedTC.dateType === 'RELATIVE'">Today (Relative)</span>
														<span ng-if="selectedTC.dateType === 'FIXED'">{{selectedTC.evalDate.date | date:'MM/dd/yyyy'}}</span>
													</div>
												</td>
											</tr>
											<tr style="text-align: center;" ng-if="selectedTC.patient.dob.type === 'fixed'">
												<td>
													<strong>Date Of Birth</strong>
												</td>
												<td style="text-align: center;">
													<div layout="row" layout-align="center center">
														<span>{{selectedTC.patient.dob.date | date:'MM/dd/yyyy'}}</span>
													</div>
												</td>
											</tr>
											<tr style="text-align: center;" ng-if="selectedTC.patient.dob.type === 'relative'">
												<td>
													<strong>Age</strong>
												</td>
												<td style="text-align: center;">
													<div layout="row" layout-align="center center">
														<table ng-if="selectedTC.patient.dob.type === 'relative'">
															<tr ng-repeat="rule in selectedTC.patient.dob.rules track by $index">
																<td><span ng-if="rule.year && rule.years === 0 && rule.month && rule.month === 0 && rule.day && rule.day === 0">0 Years</span><span ng-if="rule.year && rule.years !== 0">{{rule.year}} <strong ng-show="rule.year !== 1 && rule.year !== -1">Years</strong><strong ng-show="rule.year === 1 || rule.year === -1">Year</strong></span></td>
																<td><span ng-if="rule.month && rule.month !== 0">{{rule.month}} <strong ng-show="rule.month !== 1 && rule.month !== -1">Months</strong><strong ng-show="rule.month === 1 || rule.month === -1">Month</strong></span></td>
																<td><span ng-if="rule.day && rule.day !== 0">{{rule.day}} <strong ng-show="rule.day !== 1 && rule.day !== -1">Days</strong><strong ng-show="rule.day === 1 || rule.day === -1">Day</strong></span></td>
															</tr>
														</table>
													</div>
												</td>
											</tr>
											<tr style="text-align: center;">
												<td>
													<strong>Gender</strong>
												</td>
												<td>
													{{selectedTC.patient.gender === 'F' ? 'Female' : (selectedTC.patient.gender === 'M' ? 'Male' : '') }}
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<br />
			<div class="panel panel-primary" ng-show="aTCisSelected()" style="margin-top: 10px;" ng-init="vxview = true;">
				<div class="panel-heading panel-heading-collapsable" style="background-color: #293856;" layout="row" layout-align="start center">
					<button flex="15" class="btn btn-xs" ng-style="!vxview ? { 'background-color' : '#44bf6b' } : {}" ng-click="vxview = !vxview" style="margin: 0; margin-right: 10px;">
						<md-tooltip md-direction="top">{{ vxview ? 'Hide' : 'Show'}}</md-tooltip>
						<i ng-show="!vxview" class="fa fa-eye" aria-hidden="true" style="font-size : 1.8em; color: #2d5634;"></i>
						<i ng-show="vxview" class="fa fa-eye-slash" aria-hidden="true" style="font-size : 1.8em; color: rgb(203, 167, 167);"></i>
					</button>
					<div flex="70" style="text-align: center;">
						<strong>Vaccination History and Expected Evaluations</strong>
					</div>
					<button flex="15" title="Add Event" type="button"
						class="btn btn-xs btn-info pull-right"
						ng-click="addEvent();"
						ng-show="aTCisSelected()"
						style="margin: 0px;">
						<span><i class="fa fa-plus fa-fw"></i></span>
					</button>
				</div>
				<div class="panel-body" ng-show="selectedTC.events.length > 0 && vxview">
					<div class="toc-container">
						<ng-include src="'views/toc.html'" />
					</div>
				</div>
			</div>
			<br />
			<div class="panel panel-primary" ng-show="aTCisSelected()" style="margin-bottom: 100px;" ng-init="fcview = true;">
				<div class="panel-heading panel-heading-collapsable" style="background-color: #293856" layout="row" layout-align="start center">
					<button flex="15" class="btn btn-xs" ng-style="!fcview ? { 'background-color' : '#44bf6b' } : {}" ng-click="fcview = !fcview" style="margin: 0; margin-right: 10px;">
						<md-tooltip md-direction="top">{{ fcview ? 'Hide' : 'Show'}}</md-tooltip>
						<i ng-show="!fcview" class="fa fa-eye" aria-hidden="true" style="font-size : 1.8em; color: #2d5634;"></i>
						<i ng-show="fcview" class="fa fa-eye-slash" aria-hidden="true" style="font-size : 1.8em; color: rgb(203, 167, 167);"></i>
					</button>
					<div flex="70" style="text-align: center;">
						<strong>Expected Forecasts</strong>
					</div>
					<button flex="15" title="Add Forecast" type="button"
						class="btn btn-xs btn-info pull-right"
						style="margin: 0px;"
						ng-show="aTCisSelected()"
						ng-click="addForecast(); tcChanged()">
						<span><i class="fa fa-plus fa-fw"></i></span>
					</button>
				</div>
				<div class="panel-body" ng-show="selectedTC.forecast.length > 0 && fcview">
					<div class="toc-container">
					<ng-include src="'views/forecasts.html'" />
					</div>
				</div>
			</div>
		</div>

		<div class="fill col-md-8">
			<div class="panel panel-primary" style="background-color: rgb(250, 250, 250);">
				<div class="panel-heading" style="background-color: #293856">
					<strong>Dashboard</strong>
					<button  ng-show="aTCisSelected()" ng-click="summary()" class="btn btn-xs btn-info pull-right" style="margin: 0px;">
						Summary
					</button>
					<button style="margin: 0px; margin-right: 10px;" ng-show="aTCisSelected() && !entityUtils.inSynch(selectedTC) && hasBackUp(selectedTC)" class="btn btn-xs btn-danger pull-right" ng-click="discardChanges(selectedTC)">
						<span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Discard Changes</span>
					</button>
				</div>
				<div class="panel-body panel-resizable"
					style="padding-bottom: 10px; height : 100%; bottom : 0; min-height: 400px;">
					<div class="col-md-12 fill"
						ng-show="subview === null||subview===undefined|| !subview">
						<p>No Element Selected</p>
					</div>

					<div id="edit"  ng-show="subview !== undefined" style="width: 100%; resize : none;">
						<ng-include src="subview"></ng-include>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
