<style id="antiClickjack">body {
    display: none !important;
}</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    }
</script>
<div class="container" ng-controller="TestPlanCtrl" ng-init="initTestCases()">

<div ng-show="isAuthenticated()">
    <div ng-show="!isPending()">
        <div class="row">
			<ol ng-show="!accordi.tpList" class="breadcrumb" style="width : 100%; margin : 0px;">
           		<li style="cursor: pointer;" ng-click="selectTP(selectedTP)" ng-show="aTPisSelected()" ng-class="{'activeBC' : aTPisSelected() && !aTCisSelected()}">
           			<span class="label label-sub-component label-icon" style="vertical-align:middle;">Test Plan</span> {{selectedTP.name}}
           		</li>
  				<li style="cursor: pointer;" ng-click="selectTC(selectedTC)" ng-show="aTCisSelected()" ng-class="{'activeBC' : aTCisSelected() && !anEvisSelected() && !aFisSelected()}">
  					<span class="label label-component label-icon" style="vertical-align:middle;">Test Case</span> {{selectedTC.name}}
  				</li>
  				<li style="cursor: pointer;" ng-click="selectEvent(selectedEvent)" ng-show="anEvisSelected()" class="activeBC">
  					<span class="label label-field label-icon " style="vertical-align:middle;">Event</span> {{selectedEvent.vaccination.administred.name}} -
					{{selectedEvent.vaccination.date.fixed.date | date:'MM/dd/yyyy'}}
				</li>
  				<li style="cursor: pointer;" ng-click="selectForecast(selectedForecast)" ng-show="aFisSelected()" class="activeBC">
  					<span class="label label-segment label-icon" style="vertical-align:middle;">Forecast</span> {{selectedForecast.target.name}}
  				</li>
			</ol>
			<div uib-alert style="background-color : rgb(219, 67, 67);" ng-show="control.error.isSet" >
				<md-button style="background-color : rgb(234, 152, 45);" class="md-accent md-raised md-hue-1">SHOW</md-button>
				TestCase cannot be saved due to errors 

			</div>
            <div class="pull-left">
                <span ng-show="accordi.tpList" class="header4" style="margin-top:50px !important;">List of Test Plans</span>

<!--                 <span ng-show="accordi.tpDetails && isSelectedTCv()" class="header4" style="margin-top:50px !important;">Test Case : {{selectedTC.name}}</span> -->
<!--                 <span ng-show="accordi.tpDetails && !isSelectedTCv()" class="header4" style="margin-top:50px !important;">Test Plan : {{selectedTP.name}}</span> -->
                
            </div>

            <div class="pull-right">
                <button ng-show="accordi.tpList" type="button" class="btn btn-info btn-sm" ng-click="newTestPlan()"><i class="fa fa-plus"></i>
                    New
                </button>
                <button ng-show="accordi.tpDetails" title="View TestPlan List" type="button" class="btn btn-sm btn-info" ng-click="closeTestPlanEdit()">
                    <span><i class="fa fa-list fa-fw"></i>List</span>
                </button>
				<button ng-show="aTPisSelected() && !isLocal(selectedTP)" title="Import" type="button" class="btn btn-sm btn-info" ng-click="importButton()">
                    <span><i class="fa fa-download fa-fw"></i>Import</span>
                </button>
                <div ng-show="accordi.tpDetails && aTCisSelected() && !selectedTC.changed" class="btn-group">
                    <button type="button" class="btn btn-info btn-sm" ng-click="exportNIST()">
                        <span><i class="fa fa-upload fa-fw"></i> Export</span>
                    </button>
                    <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu igl-menu" role="menu">
                        <li><a class="point" ng-click="exportNIST()">NIST Format</a></li>
                    </ul>
                </div>
                <button title="Save Changes" type="button" class="btn btn-sm btn-success" ng-click="saveAllChangedTestPlans()" >
                    <span><i class="fa fa-floppy-o fa-fw"></i> Save</span>
                </button>
            </div>
        </div>

        <div class="row">
            <div ng-show="accordi.tpList" ng-include="'views/edit/listTP.html'"></div>
            <div ng-show="accordi.tpDetails" ng-include="'views/edit/editTP.html'"></div>
        </div>
    </div>

    <div style="font-size: 18px;text-align: center" ng-show="isPending()">
        <div msg key='account.pendingSection'></div>
    </div>

</div>

<script type="text/ng-template" id="ConfirmTestPlanDeleteCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Delete Confirmation</h3>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete the TestPlan? This operation is irreversible</p>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default btn-sm" ng-disabled="loading" ng-click="cancel()">
            <span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
        </button>
        <button class="btn btn-danger btn-sm" ng-disabled="loading" ng-click="deleteTestPlan()">
            <span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Delete</span>
        </button>
        <div ng-show="loading" style="text-align:center;padding-top:20px; padding-bottom:20px">
            <img class="ajax-loading" ng-src="images/ajax-loader.gif" alt="loading..."/>
        </div>
    </div>
    </div>
</script>

<div ng-show="!isAuthenticated()" style="font-size: 18px;text-align: center">
    <p>Please <a href="" ng-click="loginReq()"><i class="fa fa-sign-in"></i>&nbsp;login</a> to access this page. You
        can also <a href="#/registration"><i class="fa fa-chevron-circle-right"></i>&nbsp;register</a></p>
</div>



<script type="text/ng-template" id="RichTextCtrl.html">
    <div class="modal-header modal-wide">
        <h3 class="modal-title">{{editorTarget.obj.position}} . {{editorTarget.obj.name}} :
            {{editorTarget.title}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12">
                <div ng-if="!editorTarget.disabled">
                    <textarea froala="froalaEditorOptions" ng-model="editorTarget.obj[editorTarget.key]"
                              id="globalEditor"
                              name="content"
                              ng-change="recordChanged()"></textarea>
                </div>
                <div ng-if="editorTarget.disabled">
                    <div froala-view="editorTarget.obj[editorTarget.key]"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="close()"><span><i class="fa fa-times fa-fw">
            &nbsp; </i>Close</span>
        </button>
    </div>
</script>

<script type="text/ng-template" id="InputTextCtrl.html">
    <div class="modal-header">
        <h3 ng-show="editorTarget.obj.type === 'segmentRef'">
            {{editorTarget.obj.position}}.{{segmentsMap[editorTarget.obj.ref].name}}:{{segmentsMap[editorTarget.obj.ref].description}}</h3>

        <h3 ng-show="editorTarget.obj.type === 'group'">{{editorTarget.obj.position}}.{{editorTarget.obj.name}}</h3>

        <h3 ng-show="editorTarget.obj.type !=  'segmentRef' && editorTarget.obj.type !=  'group'"
            class="modal-title">{{editorTarget.obj.position}} . {{editorTarget.obj.name}} :
            {{editorTarget.title}}</h3>
    </div>
    <div class="modal-body">

        <form class="form-horizontal" novalidate>
            <div class="row">
                <div class="col-md-12">
            <textarea rows="5"  type="text" ng-disabled="editorTarget.disabled" style="width:100%;" autofocus
                      name="inputEditor" class="form-control" ng-model="editorTarget.obj[editorTarget.key]"
                    ></textarea>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-sm" ng-click="close()"><span><i class="fa fa-check fa-fw">
            &nbsp; </i>Save</span>
        </button>
    </div>
</script>

</div>
